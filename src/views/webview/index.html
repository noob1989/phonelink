<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PhoneLink</title>
    <link rel="stylesheet" href="{{stylesUri}}">
</head>
<body>
    <!-- STATUS HEADER -->
    <div class="status-header" id="statusHeader">
        <div class="phone-icon">
            ğŸ“±
            <div class="status-dot"></div>
        </div>
        <div class="status-text">
            <div class="status-title" id="statusTitle">Not Connected</div>
            <div class="status-subtitle" id="statusSubtitle">Enter IP or plug in via USB</div>
        </div>
    </div>

    <!-- CONNECT SECTION -->
    <div class="section" id="connectSection">
        <div class="section-title">Connection</div>

        <!-- Connection Mode Tabs -->
        <div class="connect-tabs">
            <button class="connect-tab active" id="tabWifi" onclick="switchTab('wifi')">ğŸ“¶ WiFi</button>
            <button class="connect-tab" id="tabUsb" onclick="switchTab('usb')">ğŸ”Œ USB</button>
        </div>

        <!-- WiFi connect form -->
        <div class="connect-form" id="wifiForm">
            <div class="input-row">
                <div class="input-group">
                    <label>IP Address</label>
                    <input type="text" id="ipInput" placeholder="192.168.1.xxx" spellcheck="false" value="192.168.1.108" />
                </div>
                <div class="input-group port">
                    <label>Port</label>
                    <input type="text" id="portInput" placeholder="xxxxx" value="" />
                </div>
            </div>
            <button class="btn btn-primary btn-full" id="connectBtn" onclick="handleConnect()">
                âš¡ Connect
            </button>
        </div>

        <!-- USB device list -->
        <div class="connect-form hidden" id="usbForm">
            <div id="usbDeviceList" class="usb-device-list">
                <div class="usb-empty">Click scan to find USB devices</div>
            </div>
            <button class="btn btn-primary btn-full" id="scanBtn" onclick="handleScan()">
                ğŸ” Scan for Devices
            </button>
        </div>

        <button class="btn btn-danger btn-full hidden" id="disconnectBtn" onclick="handleDisconnect()">
            Disconnect
        </button>
    </div>

    <!-- PAIR SECTION (collapsible) -->
    <div class="section" id="pairSection">
        <div class="section-title-row" onclick="togglePair()">
            <div class="section-title" style="margin-bottom:0">ğŸ”— Pair New Device</div>
            <span class="collapse-icon" id="pairCollapseIcon">â–¸</span>
        </div>
        <div class="pair-area hidden" id="pairArea">
            <div class="pair-hint">From your phone: Developer Options â†’ Wireless Debugging â†’ Pair device with pairing code</div>
            <div class="input-row">
                <div class="input-group">
                    <label>Pairing Code</label>
                    <input type="text" id="pairCodeInput" placeholder="123456" spellcheck="false" />
                </div>
                <div class="input-group port">
                    <label>Port</label>
                    <input type="text" id="pairPortInput" placeholder="xxxxx" />
                </div>
            </div>
            <button class="btn btn-primary btn-full" id="pairBtn" onclick="handlePair()">
                Pair
            </button>
        </div>
    </div>

    <!-- DEVICE INFO -->
    <div class="section device-info" id="deviceInfoSection">
        <div class="section-title">Device</div>
        <div class="info-grid">
            <div class="info-card full">
                <div class="info-label">Model</div>
                <div class="info-value" id="infoModel">â€”</div>
            </div>
            <div class="info-card">
                <div class="info-label">Android</div>
                <div class="info-value" id="infoAndroid">â€”</div>
            </div>
            <div class="info-card">
                <div class="info-label">Battery</div>
                <div class="info-value" id="infoBattery">â€”</div>
            </div>
            <div class="info-card">
                <div class="info-label">Resolution</div>
                <div class="info-value" id="infoResolution">â€”</div>
            </div>
            <div class="info-card">
                <div class="info-label">IP / Serial</div>
                <div class="info-value" id="infoIp">â€”</div>
            </div>
            </div>
        </div>
    </div>

    <!-- QUICK ACTIONS -->
    <div class="section device-info" id="actionsSection">
        <div class="section-title">Media</div>
        <div class="actions-grid">
            <button class="action-btn" onclick="handleAction('screenshot')" id="btnScreenshot">
                <span class="action-icon">ğŸ“¸</span>
                <span class="action-label">Screenshot</span>
            </button>
            <button class="action-btn" onclick="handleAction('screenRecord')" id="btnRecord">
                <span class="action-icon">ğŸ¬</span>
                <span class="action-label">Record</span>
            </button>
        </div>

        <div class="section-title" style="margin-top:14px">Power & Display</div>
        <div class="actions-grid">
            <button class="action-btn" onclick="handleAction('wakeScreen')">
                <span class="action-icon">â˜€ï¸</span>
                <span class="action-label">Wake / Unlock</span>
            </button>
            <button class="action-btn" onclick="handleAction('toggleStayAwake')">
                <span class="action-icon">ğŸ”‹</span>
                <span class="action-label">Toggle Stay Awake</span>
            </button>
        </div>

        <div class="section-title" style="margin-top:14px">Logs</div>
        <div class="actions-grid">
            <button class="action-btn" onclick="handleAction('logcat')">
                <span class="action-icon">ğŸ“‹</span>
                <span class="action-label">Live Logcat</span>
            </button>
            <button class="action-btn" onclick="handleAction('shell')">
                <span class="action-icon">ğŸ’»</span>
                <span class="action-label">Shell</span>
            </button>
            <button class="action-btn" onclick="handleAction('saveLogcatErrors')">
                <span class="action-icon">ğŸ”´</span>
                <span class="action-label">Save Errors</span>
            </button>
            <button class="action-btn" onclick="handleAction('saveLogcatApp')">
                <span class="action-icon">ğŸ“±</span>
                <span class="action-label">Save App Log</span>
            </button>
            <button class="action-btn" onclick="handleAction('saveLogcat')" style="grid-column: 1 / -1;">
                <span class="action-icon">ğŸ’¾</span>
                <span class="action-label">Save Full Logcat</span>
            </button>
        </div>

        <div class="section-title" style="margin-top:14px">Deploy</div>
        <div class="actions-grid">
            <button class="action-btn" onclick="handleAction('installApk')" id="btnInstall">
                <span class="action-icon">ğŸ“¦</span>
                <span class="action-label">Install APK</span>
            </button>
            <button class="action-btn" onclick="handleAction('buildAndInstall')" id="btnBuild">
                <span class="action-icon">ğŸ”¨</span>
                <span class="action-label">Build & Install</span>
            </button>
            <button class="action-btn" onclick="handleAction('browseApk')" id="btnBrowse" style="grid-column: 1 / -1;">
                <span class="action-icon">ğŸ“‚</span>
                <span class="action-label">Browse APK</span>
            </button>
        </div>

        <div style="margin-top:14px">
            <button class="btn btn-danger btn-full" onclick="handleAction('cleanDebugMedia')" style="font-size:11px; padding:6px 10px;">
                ğŸ—‘ï¸ Clean Debug Media
            </button>
        </div>
    </div>

    <!-- TOAST -->
    <div class="toast" id="toast"></div>

    <script src="{{scriptUri}}"></script>
</body>
</html>
